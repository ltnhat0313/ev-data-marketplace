(function ($) {
  "use strict";

  $(document).ready(function () {
    // Preloader
    $(window).on("load", function () {
      $(".preloader").addClass("loaded");
    });

    // Sticky Header
    var navbar = $(".navbar");
    var lastScrollTop = 0;

    $(window).on("scroll", function () {
      var st = $(this).scrollTop();
      if (st > lastScrollTop) {
        // Scroll Down
        navbar.addClass("fixed-top");
      } else {
        // Scroll Up
        if (st < 200) {
          navbar.removeClass("fixed-top");
        }
      }
      lastScrollTop = st;
    });

    // Initialize Swiper Sliders

    // Main Swiper
    var mainSwiper = new Swiper(".main-swiper", {
      speed: 800,
      loop: true,
      autoplay: {
        delay: 5000,
        disableOnInteraction: false,
      },
      pagination: {
        el: ".swiper-pagination",
        clickable: true,
      },
      navigation: {
        nextEl: ".icon-arrow-right",
        prevEl: ".icon-arrow-left",
      },
    });

    // Product Swiper (New Arrival, Best Sellers, Related Products)
    var productSwiper = new Swiper(".product-swiper", {
      slidesPerView: 4,
      spaceBetween: 30,
      loop: true,
      pagination: {
        el: ".swiper-pagination",
        clickable: true,
      },
      navigation: {
        nextEl: ".icon-arrow-right",
        prevEl: ".icon-arrow-left",
      },
      breakpoints: {
        0: {
          slidesPerView: 1,
          spaceBetween: 20,
        },
        768: {
          slidesPerView: 2,
          spaceBetween: 20,
        },
        992: {
          slidesPerView: 3,
          spaceBetween: 20,
        },
        1200: {
          slidesPerView: 4,
          spaceBetween: 30,
        },
      },
    });

    // Testimonial Swiper
    var testimonialSwiper = new Swiper(".testimonial-swiper", {
      effect: "coverflow",
      grabCursor: true,
      centeredSlides: true,
      slidesPerView: "auto",
      loop: true,
      coverflowEffect: {
        rotate: 50,
        stretch: 0,
        depth: 100,
        modifier: 1,
        slideShadows: false,
      },
      pagination: {
        el: ".testimonial-swiper-pagination",
        clickable: true,
      },
    });

    // Initialize AOS (Animate on Scroll)
    AOS.init({
      duration: 1200,
      once: true,
    });

    // Initialize GLightbox (for video popup)
    var lightbox = GLightbox({
      selector: ".youtube",
    });

    // Search Popup
    var searchPopup = $(".search-popup");
    var searchButton = $(".search-button");
    var searchClose = $(".search-popup-close");

    searchButton.on("click", function (e) {
      e.preventDefault();
      searchPopup.addClass("is-visible");
    });

    searchClose.on("click", function (e) {
      e.preventDefault();
      searchPopup.removeClass("is-visible");
    });

    $(document).on("keyup", function (e) {
      if (e.key === "Escape") {
        searchPopup.removeClass("is-visible");
      }
    });

    // Text Effects (Splitting.js)
    Splitting();

  }); // End of document ready
})(jQuery);
